name: Spellcheck
on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]
  schedule:
    - cron: '0 0 1 * *'

jobs:
  codespell:
    name: Codespell check
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Setup Python 3.12.9
        uses: actions/setup-python@v2
        with:
          python-version: 3.12.9
      - name: Install codespell
        run: |
          python -m pip install --upgrade pip
          pip install codespell
          if [ -f requirements.txt ]; then pip install -r requirements.txt; fi
      - name: Setup just
        uses: extractions/setup-just@v3
      - name: Run check
        run: just spell
  misspell:
    name: Misspell check
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Install misspell
        run: wget -O - -q https://git.io/misspell | sh -s -- -b .
      - name: Run check
        run: ./misspell -error